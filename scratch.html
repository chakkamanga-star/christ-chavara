<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Christmas Friend</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      font-family: 'Georgia', serif;
      color: #fff;
      overflow: hidden;
      background: #0a0e27;
    }

    /* Animated Christmas Background */
    .background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a0000 0%, #4a0000 50%, #1a0000 100%);
      animation: bgShift 10s ease-in-out infinite;
    }

    @keyframes bgShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Snowflakes */
    .snowflake {
      position: fixed;
      top: -10px;
      color: white;
      font-size: 1.5em;
      opacity: 0.8;
      animation: fall linear infinite;
      z-index: 1;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
      }
    }

    /* Floating lights */
    .light {
      position: fixed;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
      z-index: 1;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0.4; }
      50% { transform: translateY(-30px) translateX(20px); opacity: 1; }
    }

    .container {
      position: relative;
      z-index: 10;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .content-box {
      max-width: 400px;
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 24px;
      padding: 40px 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 215, 0, 0.3);
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 15px;
      text-align: center;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
      animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% { text-shadow: 2px 2px 8px rgba(255, 215, 0, 0.5); }
      50% { text-shadow: 2px 2px 20px rgba(255, 215, 0, 0.9); }
    }

    .greeting {
      font-size: 1.4rem;
      margin-bottom: 30px;
      color: #ffd700;
      font-weight: bold;
      text-align: center;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.7);
      animation: fadeInDown 1s ease-out;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Reveal Card */
    .reveal-card {
      position: relative;
      margin: 30px auto;
      width: 100%;
      max-width: 300px;
      height: 200px;
      perspective: 1000px;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      transform-style: preserve-3d;
    }

    .reveal-card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 60px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }

    .card-front {
      background: linear-gradient(135deg, #ff002b 0%, #ff0000 100%);
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .card-front:hover {
      transform: scale(1.05);
    }

    .card-front-content {
      text-align: center;
      padding: 20px;
    }

    .gift-icon {
      font-size: 5rem;
      margin-bottom: 15px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .card-front h2 {
      font-size: 1.8rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .card-front p {
      font-size: 1rem;
      opacity: 0.9;
    }

    .card-back {
      background: linear-gradient(135deg, #ff0000 0%, #ff000d 100%);
      transform: rotateY(180deg);
      overflow: hidden;
    }

    .card-back::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: shimmer 3s linear infinite;
    }

    @keyframes shimmer {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .friend-name {
      font-size: 1.9rem;
      font-weight: bold;
      color: #fff;
      text-shadow: 3px 3px 10px rgba(0,0,0,0.8);
      z-index: 10;
      animation: nameReveal 1s ease-out 1.5s both;
      padding: 20px;
      text-align: center;
    }

    @keyframes nameReveal {
      0% {
        opacity: 0;
        transform: scale(0.5) rotateY(180deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
      }
    }

    .sparkles {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #ffd700;
      border-radius: 50%;
      animation: sparkleFloat 2s ease-out forwards;
      opacity: 0;
    }

    @keyframes sparkleFloat {
      0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0);
      }
    }

    .hint {
      font-size: 1.1rem;
      text-align: center;
      margin-top: 25px;
      color: #ffd700;
      font-style: italic;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    .quote {
      margin-top: 35px;
      padding: 25px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      border-left: 5px solid #ffd700;
      font-size: 1.1rem;
      line-height: 1.7;
      font-style: italic;
      color: #ffe082;
      text-align: left;
      animation: fadeInUp 1s ease-out 0.5s both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .error {
      color: #ffcccb;
      font-size: 1.1rem;
      line-height: 1.6;
      text-align: center;
      background: rgba(255, 0, 0, 0.2);
      padding: 20px;
      border-radius: 12px;
      border: 2px solid rgba(255, 0, 0, 0.4);
    }

    .btn {
      display: inline-block;
      margin-top: 25px;
      padding: 14px 32px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      color: #8b0000;
      font-weight: bold;
      cursor: pointer;
      text-decoration: none;
      font-size: 1.05rem;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
      text-align: center;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
    }
  </style>
</head>
<body>
  <div class="background"></div>
  
  <div class="container">
    <div class="content-box">
      <h1>üéÅ Don't you want to see your Christmas Friend! üéÑ</h1>
      <div id="content"></div>
    
    </div>
  </div>

  <script>
    const USED_KEY_PREFIX = 'christmas_friend_used_';

    // üéÅ RANDOM ASSIGNMENTS FOR YOUR 35 FRIENDS
    const assignments = {
      's1':  "Paulson Jayson - MSW",
      's2':  "Ann Kochikunnel  - B.Com LL.B",
      's3':  "Anagha Joshy - BBA. LLB",
      's4':  "Daniel jaisan - Bcom Acca",
      's5':  "\u2060Shefin Shinoj - B.Com Acca",
      's6':  "Alita Rose Jobi -Bcom",
      's7':  "Joseph Prakash - BCA Cybersecurity",
      's8':  "Anu Mary - MSW",
      's9':  "Navya. P -MSW",
      's10':  "Aryan Martin -BBA IB",
      's11':  "Anna Maria Sunny -BCA Cyber Security",
      's12':  "\u2060John Mundadan- BBA IB",
      's13':  "Gouri Sunil - MSW",
      's14':  "Amal Biju - MSW",
      's15':  "Thobees Thomas -MBA",
      's16':  "\u2060Denita Ann D\u2019cruz -BCA CLOUD",
      's17':  "Joseph Martin Malekudy-Bcom LSCM",
      's18':  "Jewel Mariya- BBA",
      's19':  "Anas Joseph- BCA",
      's20':  "Milton Joseph-B.COM BA",
      's21':  "Pappu Gigy- BBA IB",
      's22':  "\u2060Roshan k thomas- MSW",
      's23':  "Ashlin Shibu - MSW",
      's24':  "Shon Sebastian - MCA",
      's25':  "Robin Roy -Ba appl Eco",
      's26':  "\u2060Ryan B Kalloli - Bcom BA",
      's27':  "Clare B Smiley - B.com LLB",
      's28':  "Carren Rose - B.com ACCA",
      's29':  "Tom Zacharias - B.com BA",
      's30':  "Varghese J Paul - Bcom",
      's31':  "\u2060Alen Thomas -BBA BA",
      's32':  "Amala Jaison -BBA AI&DS",
      's33':  "\u2060Mathews j - bcom",
      's34':  "Jincy Ulahannan - MSW",
      's35':  "Antony Sabu - BBA B&A",
      's36':  "Ansu Abraham - MSW",
      's37':  "\u2060Ivan Agastin - BCA",
      's38':  "\u2060Alan Sunny - Bsc. BTGE",
      's39':  "Prince Poulose - Law",
      's40':  "Alen Antony - MSW",
      's41':  "Ajil Siby - AIML",
      's42':  "Stains -AIML"
    };


    const studentNames = {
      's1':  "Stains -AIML",
      's2':  "Paulson Jayson - MSW",
      's3':  "Ann Kochikunnel  - B.Com LL.B",
      's4':  "Anagha Joshy - BBA. LLB",
      's5':  "Daniel jaisan - Bcom Acca",
      's6':  "\u2060Shefin Shinoj - B.Com Acca",
      's7':  "Alita Rose Jobi -Bcom",
      's8':  "Joseph Prakash - BCA Cybersecurity",
      's9':  "Anu Mary - MSW",
      's10':  "Navya. P -MSW",
      's11':  "Aryan Martin -BBA IB",
      's12':  "Anna Maria Sunny -BCA Cyber Security",
      's13':  "\u2060John Mundadan- BBA IB",
      's14':  "Gouri Sunil - MSW",
      's15':  "Amal Biju - MSW",
      's16':  "Thobees Thomas -MBA",
      's17':  "\u2060Denita Ann D\u2019cruz -BCA CLOUD",
      's18':  "Joseph Martin Malekudy-Bcom LSCM",
      's19':  "Jewel Mariya- BBA",
      's20':  "Anas Joseph- BCA",
      's21':  "Milton Joseph-B.COM BA",
      's22':  "Pappu Gigy- BBA IB",
      's23':  "\u2060Roshan k thomas- MSW",
      's24':  "Ashlin Shibu - MSW",
      's25':  "Shon Sebastian - MCA",
      's26':  "Robin Roy -Ba appl Eco",
      's27':  "\u2060Ryan B Kalloli - Bcom BA",
      's28':  "Clare B Smiley - B.com LLB",
      's29':  "Carren Rose - B.com ACCA",
      's30':  "Tom Zacharias - B.com BA",
      's31':  "Varghese J Paul - Bcom",
      's32':  "\u2060Alen Thomas -BBA BA",
      's33':  "Amala Jaison -BBA AI&DS",
      's34':  "\u2060Mathews j - bcom",
      's35':  "Jincy Ulahannan - MSW",
      's36':  "Antony Sabu - BBA B&A",
      's37':  "Ansu Abraham - MSW",
      's38':  "\u2060Ivan Agastin - BCA",
      's39':  "\u2060Alan Sunny - Bsc. BTGE",
      's40':  "Prince Poulose - Law",
      's41':  "Alen Antony - MSW",
      's42':  "Ajil Siby - AIML"
    };

// Block going back to previous page
history.pushState(null, "", location.href);
window.addEventListener("popstate", function () {
  history.pushState(null, "", location.href);
});

    const christmasQuotes = [
      "Christmas is not just a day, it's a feeling. May your heart be filled with warmth, joy, and the magic of giving this season!",
      "The best gift around the Christmas tree is the presence of family and friends wrapped in love. Cherish every moment!",
      "Christmas waves a magic wand over the world, and behold, everything is softer and more beautiful. Spread kindness wherever you go!",
      "May your Christmas sparkle with moments of love, laughter, and goodwill. Remember, the joy of brightening someone's day is the true spirit of Christmas!",
      "Christmas is doing a little something extra for someone. Your kindness and thoughtfulness make the world a better place!",
      "The magic of Christmas never ends, and its greatest gifts are family and friends. May this season bring you closer to those you love!"
    ];

    // Create animated background elements
    function createSnowflakes() {
      for (let i = 0; i < 20; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = '‚ùÑ';
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.animationDuration = (Math.random() * 5 + 5) + 's';
        snowflake.style.animationDelay = Math.random() * 5 + 's';
        snowflake.style.fontSize = (Math.random() * 1 + 0.5) + 'em';
        document.body.appendChild(snowflake);
      }
    }

    function createLights() {
      const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffd700', '#ff69b4'];
      for (let i = 0; i < 15; i++) {
        const light = document.createElement('div');
        light.className = 'light';
        light.style.left = Math.random() * 100 + '%';
        light.style.top = Math.random() * 100 + '%';
        light.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        light.style.animationDelay = Math.random() * 3 + 's';
        light.style.animationDuration = (Math.random() * 3 + 3) + 's';
        document.body.appendChild(light);
      }
    }

    function getStudentIdFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get('student');
    }

    function hasUsed(id) {
      return localStorage.getItem(USED_KEY_PREFIX + id) === 'true';
    }

    function markUsed(id) {
      // mark this specific student as used (keeps old behavior)
      localStorage.setItem(USED_KEY_PREFIX + id, 'true');

      // NEW: record that this device/user has already opened one friend
      localStorage.setItem('christmas_friend_done', 'true');

      // NEW: remember which student id this user opened
      localStorage.setItem('christmas_friend_opened', id);
    }

    function showError(message) {
      const content = document.getElementById('content');
      content.innerHTML = '<div class="error">' + message + '</div>';
    }

    

    function getRandomQuote() {
      return christmasQuotes[Math.floor(Math.random() * christmasQuotes.length)];
    }

    function createSparkles(container) {
      for (let i = 0; i < 30; i++) {
        setTimeout(() => {
          const sparkle = document.createElement('div');
          sparkle.className = 'sparkle';
          const angle = Math.random() * Math.PI * 2;
          const distance = Math.random() * 150 + 50;
          sparkle.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
          sparkle.style.setProperty('--ty', Math.sin(angle) * distance + 'px');
          sparkle.style.left = '50%';
          sparkle.style.top = '50%';
          container.appendChild(sparkle);
          
          setTimeout(() => sparkle.remove(), 2000);
        }, i * 50);
      }
    }

    function initRevealCard(friendName, studentId, studentName) {
      const content = document.getElementById('content');
      content.innerHTML = '';

      const greeting = document.createElement('div');
      greeting.className = 'greeting';
      greeting.textContent = `Hi ${studentName}!,Happy Christmas! üåü`;
      content.appendChild(greeting);

      const revealCard = document.createElement('div');
      revealCard.className = 'reveal-card';

      const cardInner = document.createElement('div');
      cardInner.className = 'card-inner';

      const cardFront = document.createElement('div');
      cardFront.className = 'card-front';
      cardFront.innerHTML = `
        <div class="card-front-content">
          <div class="gift-icon">üéÅ</div>
          <h2>Shazam!!üéÖ</h2>
        </div>
      `;

      const cardBack = document.createElement('div');
      cardBack.className = 'card-back';
      const sparklesDiv = document.createElement('div');
      sparklesDiv.className = 'sparkles';
      cardBack.appendChild(sparklesDiv);
      
      const friendDiv = document.createElement('div');
      friendDiv.className = 'friend-name';
      friendDiv.textContent = friendName;
      cardBack.appendChild(friendDiv);

      cardInner.appendChild(cardFront);
      cardInner.appendChild(cardBack);
      revealCard.appendChild(cardInner);
      content.appendChild(revealCard);

      const hint = document.createElement('p');
      hint.className = 'hint';
      hint.textContent = '‚ú® Click the gift to reveal your Christmas friend! ‚ú®';
      content.appendChild(hint);

      const quote = document.createElement('div');
      quote.className = 'quote';
      quote.textContent = `"${getRandomQuote()}"`;
      content.appendChild(quote);

      cardFront.addEventListener('click', () => {
        revealCard.classList.add('flipped');
        markUsed(studentId);
        createSparkles(sparklesDiv);
        hint.style.display = 'none';
      });
    }

    (function main() {
      createSnowflakes();
      createLights();

      const studentId = getStudentIdFromUrl();
      if (!studentId) {
        showError('‚ùå Invalid link. Please use the main list to open your name.');
        return;
      }

      if (!assignments[studentId]) {
        showError('‚ùå No Christmas friend found for this link.');
        return;
      }

     // block if this device already opened ANY friend (and it's not this same link)
const done = localStorage.getItem('christmas_friend_done') === 'true';
const openedId = localStorage.getItem('christmas_friend_opened');

if (done && openedId !== studentId) {
  showError('üéÑ You have already opened one Christmas friend on this device. You can only reveal one friend.');
  return;
}

// allow reopening the same id; block only other already-used ids
if (hasUsed(studentId) && openedId !== studentId) {
  showError('üéÑ You have already opened this link on this device.');
  return;
}


      const friendName = assignments[studentId];
      const studentName = studentNames[studentId];
      initRevealCard(friendName, studentId, studentName);
    })();
  </script>
</body>
</html>




